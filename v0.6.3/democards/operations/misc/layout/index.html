<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Colorant conversion and channel layout · Augmentor.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../../assets/documenter.js"></script><script src="../../../../siteinfo.js"></script><script src="../../../../../versions.js"></script><link href="../../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../../assets/style.css" rel="stylesheet" type="text/css"/><link href="../../../gridtheme.css" rel="stylesheet" type="text/css"/><link href="../../../listtheme.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../../"><img src="../../../../assets/logo.png" alt="Augmentor.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Augmentor.jl</span></div><form class="docs-search" action="../../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../../">Home</a></li><li><a class="tocitem" href="../../../../gettingstarted/">Getting Started</a></li><li><span class="tocitem">Introduction and Motivation</span><ul><li><a class="tocitem" href="../../../../background/">Background and Motivation</a></li><li><a class="tocitem" href="../../../../images/">Working with Images in Julia</a></li></ul></li><li><span class="tocitem">User&#39;s Guide</span><ul><li><a class="tocitem" href="../../../../interface/">High-level Interface</a></li><li><a class="tocitem" href="../../">Supported Operations</a></li></ul></li><li><a class="tocitem" href="../../../examples/">Tutorials</a></li><li><a class="tocitem" href="../../../../LICENSE/">LICENSE</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Colorant conversion and channel layout</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Colorant conversion and channel layout</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Evizero/Augmentor.jl/blob/master/docs/operations/misc/layout.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Colorant-conversion-and-channel-layout-1"><a class="docs-heading-anchor" href="#Colorant-conversion-and-channel-layout-1">Colorant conversion and channel layout</a><a class="docs-heading-anchor-permalink" href="#Colorant-conversion-and-channel-layout-1" title="Permalink"></a></h1><p><a href="../layout.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt/></a> <a href="https://nbviewer.jupyter.org/github/Evizero/Augmentor.jl/blob/gh-pages/v0.6.3/democards/operations/misc/layout.ipynb"><img src="https://img.shields.io/badge/show-nbviewer-579ACA.svg" alt/></a></p><p>Augmentor has warpped some commonly used basic operations so that you can use to build the augmentation pipeline. The <code>internal</code> column is what you&#39;d probably do outside of <code>Augmentor</code>.</p><table><tr><th style="text-align: right">Category</th><th style="text-align: right">internal</th><th style="text-align: right">Augmentor</th></tr><tr><td style="text-align: right">Conversion</td><td style="text-align: right"><code>T.(img)</code></td><td style="text-align: right"><code>ConvertEltype(T)</code></td></tr><tr><td style="text-align: right">Information Layout</td><td style="text-align: right"><code>ImageCore.channelview</code></td><td style="text-align: right"><code>SplitChannels</code></td></tr><tr><td style="text-align: right">Information Layout</td><td style="text-align: right"><code>ImageCore.colorview</code></td><td style="text-align: right"><code>CombineChannels</code></td></tr><tr><td style="text-align: right">Information Layout</td><td style="text-align: right"><code>Base.permutedims</code></td><td style="text-align: right"><code>PermuteDims</code></td></tr><tr><td style="text-align: right">Information Layout</td><td style="text-align: right"><code>Base.reshape</code></td><td style="text-align: right"><code>Reshape</code></td></tr></table><p>It is not uncommon that machine learning frameworks require the data in a specific form and layout. For example many deep learning frameworks expect the colorchannel of the images to be encoded in the third dimension of a 4-dimensional array. Augmentor allows to convert from (and to) these different layouts using special operations that are mainly useful in the beginning or end of a augmentation pipeline.</p><pre><code class="language-julia">using Augmentor
using ImageCore

# 300×400 Matrix{RGB{N0f8}, 2} =&gt; 300×400×3 Array{Float32, 3}
img = testpattern(RGB, ratio=0.5)
img_in = augment(img, SplitChannels() |&gt; PermuteDims(2, 3, 1) |&gt; ConvertEltype(Float32))

# 300×400×3 Array{Float32, 3} =&gt; 300×400 Matrix{RGB{N0f8}, 2}
img_out = augment(img_in, ConvertEltype(N0f8) |&gt; PermuteDims(3, 1, 2) |&gt; CombineChannels(RGB))

img_out == img</code></pre><pre><code class="language-none">true</code></pre><h2 id="References-1"><a class="docs-heading-anchor" href="#References-1">References</a><a class="docs-heading-anchor-permalink" href="#References-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Augmentor.ConvertEltype" href="#Augmentor.ConvertEltype"><code>Augmentor.ConvertEltype</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ConvertEltype &lt;: Augmentor.Operation</code></pre><p><strong>Description</strong></p><p>Convert the element type of the given array/image into the given <code>eltype</code>. This operation is especially useful for converting color images to grayscale (or the other way around). That said, the operation is not specific to color types and can also be used for numeric arrays (e.g. with separated channels).</p><p>Note that this is an element-wise convert function. Thus it can not be used to combine or separate color channels. Use <a href="#Augmentor.SplitChannels"><code>SplitChannels</code></a> or <a href="#Augmentor.CombineChannels"><code>CombineChannels</code></a> for those purposes.</p><p><strong>Usage</strong></p><pre><code class="language-none">ConvertEltype(eltype)</code></pre><p><strong>Arguments</strong></p><ul><li><strong><code>eltype</code></strong> : The eltype of the resulting array/image.</li></ul><p><strong>See also</strong></p><p><a href="#Augmentor.CombineChannels"><code>CombineChannels</code></a>, <a href="#Augmentor.SplitChannels"><code>SplitChannels</code></a>, <a href="../../../../interface/#Augmentor.augment"><code>augment</code></a></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Augmentor, Colors

julia&gt; A = rand(RGB, 10, 10) # three color channels
10×10 Array{RGB{Float64},2}:
[...]

julia&gt; augment(A, ConvertEltype(Gray{Float32})) # convert to grayscale
10×10 Array{Gray{Float32},2}:
[...]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Evizero/Augmentor.jl/blob/2739aa8e002586cc0b428074d34019fe3a758e17/src/operations/convert.jl#L1-L47">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Augmentor.SplitChannels" href="#Augmentor.SplitChannels"><code>Augmentor.SplitChannels</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">SplitChannels &lt;: Augmentor.Operation</code></pre><p><strong>Description</strong></p><p>Splits out the color channels of the given image using the function <code>ImageCore.channelview</code>. This will effectively create a new array dimension for the colors in the front. In contrast to <code>ImageCore.channelview</code> it will also result in a new dimension for gray images.</p><p>This operation is mainly useful at the end of a pipeline in combination with <a href="#Augmentor.PermuteDims"><code>PermuteDims</code></a> in order to prepare the image for the training algorithm, which often requires the color channels to be separate.</p><p><strong>Usage</strong></p><pre><code class="language-none">SplitChannels()</code></pre><p><strong>See also</strong></p><p><a href="#Augmentor.PermuteDims"><code>PermuteDims</code></a>, <a href="#Augmentor.CombineChannels"><code>CombineChannels</code></a>, <a href="../../../../interface/#Augmentor.augment"><code>augment</code></a></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Augmentor

julia&gt; img = testpattern()
300×400 Array{RGBA{N0f8},2}:
[...]

julia&gt; augment(img, SplitChannels())
4×300×400 Array{N0f8,3}:
[...]

julia&gt; augment(img, SplitChannels() |&gt; PermuteDims(3,2,1))
400×300×4 Array{N0f8,3}:
[...]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Evizero/Augmentor.jl/blob/2739aa8e002586cc0b428074d34019fe3a758e17/src/operations/channels.jl#L1-L46">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Augmentor.CombineChannels" href="#Augmentor.CombineChannels"><code>Augmentor.CombineChannels</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">CombineChannels &lt;: Augmentor.Operation</code></pre><p><strong>Description</strong></p><p>Combines the first dimension of a given array into a colorant of type <code>colortype</code> using the function <code>ImageCore.colorview</code>. The main difference is that a separate color channel is also expected for Gray images.</p><p>The shape of the input image has to be appropriate for the given <code>colortype</code>, which also means that the separated color channel has to be the first dimension of the array. See <a href="#Augmentor.PermuteDims"><code>PermuteDims</code></a> if that is not the case.</p><p><strong>Usage</strong></p><pre><code class="language-none">CombineChannels(colortype)</code></pre><p><strong>Arguments</strong></p><ul><li><strong><code>colortype</code></strong> : The color type of the resulting image. Must   be a subtype of <code>ColorTypes.Colorant</code> and match the color   channel of the given image.</li></ul><p><strong>See also</strong></p><p><a href="#Augmentor.SplitChannels"><code>SplitChannels</code></a>, <a href="#Augmentor.PermuteDims"><code>PermuteDims</code></a>, <a href="../../../../interface/#Augmentor.augment"><code>augment</code></a></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Augmentor, Colors

julia&gt; A = rand(3, 10, 10) # three color channels
3×10×10 Array{Float64,3}:
[...]

julia&gt; augment(A, CombineChannels(RGB))
10×10 Array{RGB{Float64},2}:
[...]

julia&gt; B = rand(1, 10, 10) # singleton color channel
1×10×10 Array{Float64,3}:
[...]

julia&gt; augment(B, CombineChannels(Gray))
10×10 Array{Gray{Float64},2}:
[...]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Evizero/Augmentor.jl/blob/2739aa8e002586cc0b428074d34019fe3a758e17/src/operations/channels.jl#L76-L131">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Augmentor.PermuteDims" href="#Augmentor.PermuteDims"><code>Augmentor.PermuteDims</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">PermuteDims &lt;: Augmentor.Operation</code></pre><p><strong>Description</strong></p><p>Permute the dimensions of the given array with the predefined permutation <code>perm</code>. This operation is particularly useful if the order of the dimensions needs to be different than the default &quot;julian&quot; layout (described below).</p><p>Augmentor expects the given images to be in vertical-major layout for which the colors are encoded in the element type itself. Many deep learning frameworks however require their input in a different order. For example it is not untypical that separate color channels are expected to be encoded in the third dimension.</p><p><strong>Usage</strong></p><pre><code class="language-none">PermuteDims(perm)

PermuteDims(perm...)</code></pre><p><strong>Arguments</strong></p><ul><li><strong><code>perm</code></strong> : The concrete dimension permutation that should be   used. Has to be specified as a <code>Vararg{Int}</code> or as a <code>NTuple</code>   of <code>Int</code>. The length of <code>perm</code> has to match the number of   dimensions of the expected input image to that operation.</li></ul><p><strong>See also</strong></p><p><a href="#Augmentor.SplitChannels"><code>SplitChannels</code></a>, <a href="#Augmentor.CombineChannels"><code>CombineChannels</code></a>, <a href="../../../../interface/#Augmentor.augment"><code>augment</code></a></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Augmentor, Colors

julia&gt; A = rand(10, 5, 3) # width=10, height=5, and 3 color channels
10×5×3 Array{Float64,3}:
[...]

julia&gt; img = augment(A, PermuteDims(3,2,1) |&gt; CombineChannels(RGB))
5×10 Array{RGB{Float64},2}:
[...]

julia&gt; img2 = testpattern()
300×400 Array{RGBA{N0f8},2}:
[...]

julia&gt; B = augment(img2, SplitChannels() |&gt; PermuteDims(3,2,1))
400×300×4 Array{N0f8,3}:
[...]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Evizero/Augmentor.jl/blob/2739aa8e002586cc0b428074d34019fe3a758e17/src/operations/dims.jl#L1-L60">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Augmentor.Reshape" href="#Augmentor.Reshape"><code>Augmentor.Reshape</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Reshape &lt;: Augmentor.Operation</code></pre><p><strong>Description</strong></p><p>Reinterpret the shape of the given array of numbers or colorants. This is useful for example to create singleton-dimensions that deep learning frameworks may need for colorless images, or for converting an image array to a feature vector (and vice versa).</p><p><strong>Usage</strong></p><pre><code class="language-none">Reshape(dims)

Reshape(dims...)</code></pre><p><strong>Arguments</strong></p><ul><li><strong><code>dims</code></strong> : The new sizes for each dimension of the output   image. Has to be specified as a <code>Vararg{Int}</code> or as a   <code>NTuple</code> of <code>Int</code>.</li></ul><p><strong>See also</strong></p><p><a href="#Augmentor.CombineChannels"><code>CombineChannels</code></a>, <a href="../../../../interface/#Augmentor.augment"><code>augment</code></a></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Augmentor, Colors

julia&gt; A = rand(10,10)
10×10 Array{Float64,2}:
[...]

julia&gt; augment(A, Reshape(10,10,1)) # add trailing singleton dimension
10×10×1 Array{Float64,3}:
[...]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Evizero/Augmentor.jl/blob/2739aa8e002586cc0b428074d34019fe3a758e17/src/operations/dims.jl#L93-L137">source</a></section></article><hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 17 May 2021 13:17">Monday 17 May 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
