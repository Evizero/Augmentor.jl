<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Composition utilities · Augmentor.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../../assets/documenter.js"></script><script src="../../../../siteinfo.js"></script><script src="../../../../../versions.js"></script><link href="../../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../../assets/style.css" rel="stylesheet" type="text/css"/><link href="../../../gridtheme.css" rel="stylesheet" type="text/css"/><link href="../../../listtheme.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../../"><img src="../../../../assets/logo.png" alt="Augmentor.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Augmentor.jl</span></div><form class="docs-search" action="../../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../../">Home</a></li><li><a class="tocitem" href="../../../../gettingstarted/">Getting Started</a></li><li><span class="tocitem">Introduction and Motivation</span><ul><li><a class="tocitem" href="../../../../background/">Background and Motivation</a></li><li><a class="tocitem" href="../../../../images/">Working with Images in Julia</a></li></ul></li><li><span class="tocitem">User&#39;s Guide</span><ul><li><a class="tocitem" href="../../../../interface/">High-level Interface</a></li><li><a class="tocitem" href="../../">Supported Operations</a></li></ul></li><li><a class="tocitem" href="../../../examples/">Tutorials</a></li><li><a class="tocitem" href="../../../../LICENSE/">LICENSE</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Composition utilities</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Composition utilities</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Evizero/Augmentor.jl/blob/master/docs/operations/misc/utilities.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Composition-utilities-1"><a class="docs-heading-anchor" href="#Composition-utilities-1">Composition utilities</a><a class="docs-heading-anchor-permalink" href="#Composition-utilities-1" title="Permalink"></a></h1><p><a href="../utilities.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt/></a> <a href="https://nbviewer.jupyter.org/github/Evizero/Augmentor.jl/blob/gh-pages/v0.6.2/democards/operations/misc/utilities.ipynb"><img src="https://img.shields.io/badge/show-nbviewer-579ACA.svg" alt/></a></p><p>Aside from &quot;true&quot; operations that specify some kind of transformation, there are also a couple of special utility operations used for functionality such as stochastic branching.</p><pre><code class="language-julia">using Augmentor
using Random
Random.seed!(1337)

img_in = testpattern(RGB, ratio=0.5)
img_out = augment(img_in, Either(0.5=&gt;NoOp(), 0.25=&gt;FlipX(), 0.25=&gt;FlipY()))</code></pre><p><img src="../utilities.gif" alt/></p><h2 id="References-1"><a class="docs-heading-anchor" href="#References-1">References</a><a class="docs-heading-anchor-permalink" href="#References-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Augmentor.NoOp" href="#Augmentor.NoOp"><code>Augmentor.NoOp</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">NoOp &lt;: Augmentor.AffineOperation</code></pre><p>Identity transformation that does not do anything with the given image, but instead passes it along unchanged (without copying).</p><p>Usually used in combination with <a href="#Augmentor.Either"><code>Either</code></a> to denote a &quot;branch&quot; that does not perform any computation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Evizero/Augmentor.jl/blob/fe28b5e38eb64935f9733d4e8ee08203dd955f0c/src/operations/noop.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Augmentor.Either" href="#Augmentor.Either"><code>Augmentor.Either</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Either &lt;: Augmentor.ImageOperation</code></pre><p><strong>Description</strong></p><p>Chooses between the given <code>operations</code> at random when applied. This is particularly useful if one for example wants to first either rotate the image 90 degree clockwise or anticlockwise (but never both), and then apply some other operation(s) afterwards.</p><p>When compiling a pipeline, <code>Either</code> will analyze the provided <code>operations</code> in order to identify the preferred formalism to use when applied. The chosen formalism is chosen such that it is supported by all given <code>operations</code>. This way the output of applying <code>Either</code> will be inferable and the whole pipeline will remain type-stable (even though randomness is involved).</p><p>By default each specified image operation has the same probability of occurrence. This default behaviour can be overwritten by specifying the <code>chance</code> manually.</p><p><strong>Usage</strong></p><pre><code class="language-none">Either(operations, [chances])

Either(operations...; [chances])

Either(pairs...)

*(operations...)

*(pairs...)</code></pre><p><strong>Arguments</strong></p><ul><li><p><strong><code>operations</code></strong> : <code>NTuple</code> or <code>Vararg</code> of <code>Augmentor.ImageOperation</code>   that denote the possible choices to sample from when applied.</p></li><li><p><strong><code>chances</code></strong> : Optional. Denotes the relative chances for an   operation to be sampled. Has to contain the same number of   elements as <code>operations</code>. Either an <code>NTuple</code> of numbers if   specified as positional argument, or alternatively a   <code>AbstractVector</code> of numbers if specified as a keyword   argument. If omitted every operation will have equal   probability of occurring.</p></li><li><p><strong><code>pairs</code></strong> : <code>Vararg</code> of <code>Pair{&lt;:Real,&lt;:Augmentor.ImageOperation}</code>.   A compact way to specify an operation and its chance of   occurring together.</p></li></ul><p><strong>See also</strong></p><p><a href="#Augmentor.NoOp"><code>NoOp</code></a>, <a href="../../../../interface/#Augmentor.augment"><code>augment</code></a></p><p><strong>Examples</strong></p><pre><code class="language-julia">using Augmentor
img = testpattern()

# all three operations have equal chance of occuring
augment(img, Either(FlipX(), FlipY(), NoOp()))
augment(img, FlipX() * FlipY() * NoOp())

# NoOp is twice as likely as either FlipX or FlipY
augment(img, Either(1=&gt;FlipX(), 1=&gt;FlipY(), 2=&gt;NoOp()))
augment(img, Either(FlipX(), FlipY(), NoOp(), chances=[1,1,2]))
augment(img, Either((FlipX(), FlipY(), NoOp()), (1,1,2)))
augment(img, (1=&gt;FlipX()) * (1=&gt;FlipY()) * (2=&gt;NoOp()))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Evizero/Augmentor.jl/blob/fe28b5e38eb64935f9733d4e8ee08203dd955f0c/src/operations/either.jl#L1-L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Augmentor.CacheImage" href="#Augmentor.CacheImage"><code>Augmentor.CacheImage</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">CacheImage &lt;: Augmentor.ImageOperation</code></pre><p><strong>Description</strong></p><p>Write the current state of the image into the working memory. Optionally a user has the option to specify a preallocated <code>buffer</code> to write the image into. Note that if a <code>buffer</code> is provided, then it has to be of the correct size and eltype.</p><p>Even without a preallocated <code>buffer</code> it can be beneficial in some situations to cache the image. An example for such a scenario is when chaining a number of affine transformations after an elastic distortion, because performing that lazily requires nested interpolation.</p><p><strong>Usage</strong></p><pre><code class="language-none">CacheImage()

CacheImage(buffer)</code></pre><p><strong>Arguments</strong></p><ul><li><strong><code>buffer</code></strong> : Optional. A preallocated <code>AbstractArray</code> of the   appropriate size and eltype.</li></ul><p><strong>See also</strong></p><p><a href="../../../../interface/#Augmentor.augment"><code>augment</code></a></p><p><strong>Examples</strong></p><pre><code class="language-julia">using Augmentor

# make pipeline that forces caching after elastic distortion
pl = ElasticDistortion(3,3) |&gt; CacheImage() |&gt; Rotate(-10:10) |&gt; ShearX(-5:5)

# cache output of elastic distortion into the allocated
# 20x20 Matrix{Float64}. Note that for this case this assumes that
# the input image is also a 20x20 Matrix{Float64}
pl = ElasticDistortion(3,3) |&gt; CacheImage(zeros(20,20)) |&gt; Rotate(-10:10)

# convenience syntax with the same effect as above.
pl = ElasticDistortion(3,3) |&gt; zeros(20,20) |&gt; Rotate(-10:10)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Evizero/Augmentor.jl/blob/fe28b5e38eb64935f9733d4e8ee08203dd955f0c/src/operations/cache.jl#L1-L53">source</a></section></article><hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 18 September 2020 11:57">Friday 18 September 2020</span>. Using Julia version 1.5.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
